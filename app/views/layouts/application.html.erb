<!DOCTYPE html>
  <html>
    <head>
      <title><%= content_for(:title) || "Expense Tracker" %></title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <%= csrf_meta_tags %>
      <%= csp_meta_tag %>
      <%= yield :head %>

      <!-- Include CSS -->
      <%= javascript_importmap_tags %>
      <%= stylesheet_link_tag "application", media: "all", "data-turbo-track": "reload" %>
      <%= stylesheet_link_tag "custom", media: "all" %>

      <style type="text/css">
        /* General Styles */
        body {
          padding-top: 70px;
          margin: 0;
          font-family: 'Arial', sans-serif;
          background-color: #f8f9fa;
        }

        /* Header Styling */
        .header {
          position: fixed; /* Keeps it fixed at the top */
          top: 0;
          left: 0;
          width: 100%;
          background-color: #e9e9e9;
          color: black;
          box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
          z-index: 1000; /* Ensures it stays above everything */
          padding: 15px 30px;
        }

        .header-container{
          display: flex;
          align-items: center;
          justify-content: space-between;
          width: 100%;
          padding: auto 50px;
        }

        .h2 {
          font-size: 24px;
          font-weight: bold;
          margin: 0;
          flex: 1;
        }

        /* Navigation Bar */
        .topnav {
          display: flex;
          align-items: center;
          gap: 10px;
        }

        .nav-link {
          text-decoration: none;
          font-size: 16px;
          padding: 10px 15px;
          border-radius: 5px;
          transition: background-color 0.3s, color 0.3s;
        }

        .nav-link:hover {
          background-color: #5d5d5d ;
          color: white;
        }

        .nav-link.active {
          color: black;
        }

        /* Dropdown Menu */
        .dropdown {
          position: relative;
          display: inline-block;
        }

        .dropdown-button {
          background: transparent;
          border: none;
          padding: 10px 15px;
          font-size: 16px;
          cursor: pointer;
          border-radius: 5px;
          transition: background-color 0.3s;
        }

        .dropdown-button:hover {
          background-color: #171717;
          color: white;
        }

        .dropdown-content {
          display: none;
          position: absolute;
          background-color: white;
          min-width: 160px;
          box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
          z-index: 1;
          border-radius: 5px;
          overflow: hidden;
        }

        .dropdown-content .dropdown-item {
          color: black;
          padding: 10px 15px;
          text-decoration: none;
          display: block;
          font-size: 14px;
          transition: background-color 0.3s;
        }

        .dropdown-content .dropdown-item:hover {
          background-color: #007bff;
          color: white;
        }

        .dropdown:hover .dropdown-content {
          display: block;
        }

        /* Auth Buttons */
        .auth-buttons {
          display: flex;
          gap: 10px;
        }

        .btn-help {
          display: inline-block;
          padding: 8px 15px;
          font-size: 14px;
          font-weight: bold;
          color: white;
          text-align: center;
          text-decoration: none;
          border-radius: 5px;
          transition: background-color 0.3s, transform 0.3s;
        }

        .btn-help:hover {
          transform: scale(1.05);
        }

        .btn-success {
          background-color: #28a745;
        }

        .btn-success:hover {
          background-color: #218838;
        }

        .btn-primary {
          background-color: #17a2b8;
        }

        .btn-primary:hover {
          background-color: #138496;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
          .header {
            flex-direction: column;
            text-align: center;
            padding: 10px 20px;
          }

          .topnav {
            flex-direction: column;
            gap: 10px;
          }

          .auth-buttons {
            flex-direction: column;
            width: 100%;
            align-items: center;
          }

          .btn-help {
            width: 100%;
            margin-bottom: 10px;
          }
        }

        @media (min-width: 1200px) {
          .h2 {
            font-size: 28px;
          }

          .nav-link {
            font-size: 18px;
          }
        }
      </style>
    </head>

    <body>
      <header class="header">
      <div class="header-container">
        <h2 class="h2">Expense Tracker</h2>
        <% if user_signed_in? %>
          <nav class="topnav">
            <%= link_to 'Dashboard', user_dashboard_path, class: 'nav-link' %>
            <%= link_to 'Add Expense', add_expense_path, class: 'nav-link' %>
            <%= link_to 'All Expenses', all_expenses_path, class: 'nav-link' %>
            <div class="dropdown">
              <button class="dropdown-button">Account <i class="arrow down"></i></button>
              <div class="dropdown-content">
                <%= link_to 'Profile', edit_user_registration_path, class: 'dropdown-item' %>
                <%= button_to 'Logout', destroy_user_session_path, method: :delete, class: 'dropdown-item' %>
              </div>
            </div>
          </nav>
        <% end %>
        <div class="auth-buttons">
          <% unless user_signed_in? %>
            <%= link_to 'Sign In', new_user_session_path, class: 'btn btn-success btn-help' %>
            <%= link_to 'Sign Up', new_user_registration_path, class: 'btn btn-primary btn-help' %>
          <% end %>
        </div>
      </div>
    </header>

    <%= yield %>

      <!-- Include JavaScript -->
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

      <script type="text/javascript">
        // Get all nav links inside the topnav
        const navLinks = document.querySelectorAll('.topnav a');

        // Add a click event listener to each link
        navLinks.forEach(link => {
          link.addEventListener('click', function () {
            // Remove the 'active' class from all links
            navLinks.forEach(nav => nav.classList.remove('active'));

            // Add the 'active' class to the clicked link
            this.classList.add('active');
          });
        });
      </script>
    </body>
</html>
